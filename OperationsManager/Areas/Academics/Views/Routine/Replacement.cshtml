@using OpMgr.Resources.User
@using OperationsManager.ExtendedHtmlHelpers
@model OperationsManager.Areas.Academics.Models.Employee

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Replacement</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/scripts/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script type="text/javascript">

        function refreshAndClose() {

        window.opener.location.reload(true);
        window.close();
    }



        $(document).ready(function () {

            $("#replacement_button").click(function (e) {
               var model = {
                    id: document.getElementById("Id").value,
                    employeeid: document.getElementById("ddl_replacementteacher").value
                    //practical : document.getElementById("practical:checked").value,
                };
                 e.preventDefault();
                 $.ajax({
                     dataType: 'JSON',
                     type: "POST",
                     url: "pstreplacement?data="+JSON.stringify(model),

                     success: function (result) {

                         refreshAndClose();
                     },
                     error: function (result) {
                         alert(error.statusText);
                     }
                 });
            });


        })
    </script>
</head>
<body><div class="container py-5">
    <div class="row">
        <div class="col-sm-6 col-md-6 col-xs-12">
            <div class="form-group">
                @using (Html.BeginForm("Replacement", "Routine", FormMethod.Post, new { id = "ReplacementForm", enctype = "multipart/form-data" }))
                {
                    @Html.AntiForgeryToken()
                    <p><b>SELECT A FACULTY FOR REPLACEMENT FROM THE BELOW LIST:</b></p>
                    @Html.DropDownListFor(m => m.employeeid,Model.employeeList,"Please select a name", new {id= "ddl_replacementteacher", @class = "form-control requiredField reqSearch" })
                        <br/>
                    @Html.HiddenFor(m => m.id, new { id = "Id" })
                        //<button type="submit" class="btn btn-primary block" style="display:none">@UserResource.RegisterButton</button>
                        <button id="replacement_button" value="val_1" name="but1">Submit</button>
                        <input type='submit' id='btn' value='Close' onclick="refreshAndClose()" />
                }
            </div>
        </div>
    </div>
</div>
 
    </body>
</html>